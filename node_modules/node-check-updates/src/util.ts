import semver from "semver";

import { Dependency } from "./types";

interface KeyValueObject {
  [key: string]: any;
}

export function objectToArray(obj?: KeyValueObject): Dependency[] {
  if (!obj || Object.keys(obj).length === 0) {
    return []; // Return empty array for undefined or empty object
  }

  return Object.entries(obj).map(([name, version]) => ({ name, version }));
}

export function getValidSemverVersion(version: string): string | null {
  return semver.valid(semver.coerce(version));
}
