{"version":3,"file":"addon-entry-editor-colored-context-menus.index.js","sources":["webpack:///./node_modules/scratch-gui/src/addons/addons/editor-colored-context-menus/userscript.css","webpack:///./node_modules/scratch-gui/src/addons/addons/editor-colored-context-menus/_runtime_entry.js","webpack:///./node_modules/scratch-gui/src/addons/addons/editor-colored-context-menus/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-contextmenu-colored .blocklyContextMenu {\\n  background-color: var(--sa-contextmenu-bg);\\n  border-color: var(--sa-contextmenu-border);\\n}\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem-highlight,\\n.sa-contextmenu-colored .s3dev-mi:hover {\\n  background-color: #0001;\\n  border-color: transparent !important;\\n}\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem[style*=\\\"border-top\\\"] {\\n  border-top-color: var(--sa-contextmenu-border) !important;\\n}\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem .goog-menuitem-content {\\n  color: var(--sa-contextmenu-text);\\n}\\n\", \"\"]);\n\n// exports\n","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./userscript.css\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"userscript.css\": _css\n};","import { removeAlpha } from \"../../libraries/common/cs/text-color.esm.js\";\nexport default async function (_ref) {\n  let {\n    addon,\n    console\n  } = _ref;\n  const ScratchBlocks = await addon.tab.traps.getBlockly();\n  const applyContextMenuColor = block => {\n    const widgetDiv = ScratchBlocks.WidgetDiv.DIV;\n    if (!widgetDiv) {\n      return;\n    }\n    const background = block.svgPath_;\n    if (!background) {\n      return;\n    }\n    const fill = removeAlpha(background.getAttribute(\"fill\"));\n    const border = background.getAttribute(\"stroke\") || \"#0003\";\n    const text = ScratchBlocks.Colours.text;\n    widgetDiv.classList.add(\"sa-contextmenu-colored\");\n    widgetDiv.style.setProperty(\"--sa-contextmenu-bg\", fill);\n    widgetDiv.style.setProperty(\"--sa-contextmenu-border\", border);\n    widgetDiv.style.setProperty(\"--sa-contextmenu-text\", text);\n  };\n  const originalHandleRightClick = ScratchBlocks.Gesture.prototype.handleRightClick;\n  ScratchBlocks.Gesture.prototype.handleRightClick = function () {\n    const block = this.targetBlock_;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const ret = originalHandleRightClick.call(this, ...args);\n    if (block) {\n      applyContextMenuColor(block);\n    }\n    return ret;\n  };\n  const originalHide = ScratchBlocks.WidgetDiv.hide;\n  ScratchBlocks.WidgetDiv.hide = function () {\n    if (ScratchBlocks.WidgetDiv.DIV) {\n      ScratchBlocks.WidgetDiv.DIV.classList.remove(\"sa-contextmenu-colored\");\n    }\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return originalHide.call(this, ...args);\n  };\n}"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}