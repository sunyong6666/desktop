{"version":3,"file":"addon-entry-editor-sounds.index.js","sources":["webpack:///./node_modules/scratch-gui/src/addons/addons/editor-sounds/_runtime_entry.js","webpack:///./node_modules/scratch-gui/src/addons/addons/editor-sounds/userscript.js"],"sourcesContent":["/* generated by pull.js */\nimport _js from \"./userscript.js\";\nexport const resources = {\n  \"userscript.js\": _js\n};","export default async function (_ref) {\n  let {\n    addon,\n    console\n  } = _ref;\n  const ScratchBlocks = await addon.tab.traps.getBlockly();\n  const injectCurrent = () => {\n    const workspace = Blockly.getMainWorkspace();\n    const pathToMedia = workspace.options.pathToMedia;\n    ScratchBlocks.inject.loadSounds_(pathToMedia, workspace);\n  };\n\n  // Add sounds to the current workspace\n  injectCurrent();\n\n  // Add sounds to all future workspaces\n  const originalInit = ScratchBlocks.init_;\n  ScratchBlocks.init_ = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const wksp = args[0];\n    wksp.options.hasSounds = true;\n    return originalInit.call(this, ...args);\n  };\n  addon.self.addEventListener(\"disabled\", () => {\n    const workspace = Blockly.getMainWorkspace();\n    const audio = workspace.getAudioManager();\n    delete audio.SOUNDS_.click;\n    delete audio.SOUNDS_.delete;\n  });\n  addon.self.addEventListener(\"reenabled\", injectCurrent);\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}